"use strict";(self.webpackChunktp3=self.webpackChunktp3||[]).push([[400],{7126:(S,C,r)=>{function h(m,p,l,s,u,f,Z){try{var v=m[f](Z),d=v.value}catch(y){return void l(y)}v.done?p(d):Promise.resolve(d).then(s,u)}function g(m){return function(){var p=this,l=arguments;return new Promise(function(s,u){var f=m.apply(p,l);function Z(d){h(f,s,u,Z,v,"next",d)}function v(d){h(f,s,u,Z,v,"throw",d)}Z(void 0)})}}r.d(C,{w:()=>A});var n=r(8186),e=r(1841);let A=(()=>{class m{constructor(l){this.http=l}login(l,s){const u=new FormData;return u.append("login",l),u.append("pass",s),this.http.post("https://projet-woll-pierre.onrender.com/api/login",u)}getData(){var l=this;return g(function*(){try{return yield l.http.get("../assets/mock/bouchonCatalogue.json").toPromise()}catch(s){return console.log(s),""}})()}getClient(){var l=this;return g(function*(){try{return yield l.http.get("../assets/mock/clientsList.json").toPromise()}catch(s){return console.log(s),""}})()}}return m.\u0275fac=function(l){return new(l||m)(n.LFG(e.eN))},m.\u0275prov=n.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},1400:(S,C,r)=>{r.r(C),r.d(C,{ClientModule:()=>b});var h=r(8583),g=r(4321),n=r(3679),e=r(8186);function A(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",34),e.TgZ(1,"p"),e._uU(2),e.qZA(),e.TgZ(3,"button",35),e.NdJ("click",function(){return e.CHM(t),e.oxw().clearA()}),e._uU(4,"CLEAR"),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(2),e.Oqu(t.Res)}}let m=(()=>{class o{constructor(t){this.formBuilder=t,this.Res="",this.FormIdentification=this.formBuilder.group({Civilite:["",n.kI.required],name:["",n.kI.required],prenom:["",n.kI.required],pays:["",n.kI.required],CP:["",n.kI.required],Ville:["",n.kI.required],adresse:["",n.kI.required],Tel:["",n.kI.required],Email:["",n.kI.required],Login:["",n.kI.required],Password:["",n.kI.required],Password2:["",n.kI.required]})}ngOnInit(){}submit(){console.log(this.FormIdentification.value),this.Res=JSON.stringify(this.FormIdentification.value)}clear(){console.log("clear"),this.Res=""}clearA(){console.log("clear"),this.Res=""}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(n.qu))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-formulaire"]],decls:62,vars:2,consts:[[3,"formGroup","ngSubmit"],[1,"form-group,row",2,"display","flex"],[1,"col-md-2"],["for","Civilit\xe9"],["formControlName","Civilite","id","Civilit\xe9",1,"form-control",2,"margin","auto"],[1,"col-md-5"],["for","Name"],["type","text","formControlName","name","id","Name","placeholder","Nom",1,"form-control"],["for","prenom"],["type","text","formControlName","prenom","id","prenom","placeholder","Prenom",1,"form-control"],[1,"form-group",2,"display","flex"],[1,"col-md-3"],["for","pays"],["type","pays","formControlName","pays","id","pays","placeholder","pays",1,"form-control"],["for","CP"],["type","number","formControlName","CP","id","CP","placeholder","CP",1,"form-control"],["for","Ville"],["type","text","formControlName","Ville","id","Ville","placeholder","Ville",1,"form-control"],[1,"col-md-4"],["for","Adresse"],["type","text","formControlName","adresse","id","Adresse","placeholder","Adresse",1,"form-control"],[1,"col-md-6"],["for","Telephone"],["type","tel","formControlName","Tel","id","Telephone","placeholder","Telephone",1,"form-control"],["for","email"],["type","email","formControlName","Email","id","email","placeholder","email",1,"form-control"],["for","Login"],["type","text","formControlName","Login","id","Login","placeholder","Login",1,"form-control"],["for","psw"],["type","password","formControlName","Password","id","psw","placeholder","Password",1,"form-control"],["for","psw2"],["type","password","formControlName","Password2","id","psw2","placeholder","Password",1,"form-control"],["type","submit",1,"btn","btn-primary",2,"margin-left","15px"],["style","margin: 15px;",4,"ngIf"],[2,"margin","15px"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return i.submit()}),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"label",3),e._uU(4,"Civilit\xe9"),e.qZA(),e.TgZ(5,"select",4),e.TgZ(6,"option"),e._uU(7,"--"),e.qZA(),e.TgZ(8,"option"),e._uU(9,"M."),e.qZA(),e.TgZ(10,"option"),e._uU(11,"Mme."),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",5),e.TgZ(13,"label",6),e._uU(14,"Nom"),e.qZA(),e._UZ(15,"input",7),e.qZA(),e.TgZ(16,"div",5),e.TgZ(17,"label",8),e._uU(18,"Prenom"),e.qZA(),e._UZ(19,"input",9),e.qZA(),e.qZA(),e.TgZ(20,"div",10),e.TgZ(21,"div",11),e.TgZ(22,"label",12),e._uU(23,"Pays"),e.qZA(),e._UZ(24,"input",13),e.qZA(),e.TgZ(25,"div",2),e.TgZ(26,"label",14),e._uU(27,"Code Postal"),e.qZA(),e._UZ(28,"input",15),e.qZA(),e.TgZ(29,"div",11),e.TgZ(30,"label",16),e._uU(31,"Ville"),e.qZA(),e._UZ(32,"input",17),e.qZA(),e.TgZ(33,"div",18),e.TgZ(34,"label",19),e._uU(35,"Adresse"),e.qZA(),e._UZ(36,"input",20),e.qZA(),e.qZA(),e.TgZ(37,"div",10),e.TgZ(38,"div",21),e.TgZ(39,"label",22),e._uU(40,"Telephone"),e.qZA(),e._UZ(41,"input",23),e.qZA(),e.TgZ(42,"div",21),e.TgZ(43,"label",24),e._uU(44,"Email"),e.qZA(),e._UZ(45,"input",25),e.qZA(),e.qZA(),e.TgZ(46,"div",10),e.TgZ(47,"div",18),e.TgZ(48,"label",26),e._uU(49,"Login"),e.qZA(),e._UZ(50,"input",27),e.qZA(),e.TgZ(51,"div",18),e.TgZ(52,"label",28),e._uU(53,"Password"),e.qZA(),e._UZ(54,"input",29),e.qZA(),e.TgZ(55,"div",18),e.TgZ(56,"label",30),e._uU(57,"Password"),e.qZA(),e._UZ(58,"input",31),e.qZA(),e.qZA(),e.TgZ(59,"button",32),e._uU(60,"Submit"),e.qZA(),e.qZA(),e.YNc(61,A,5,1,"div",33)),2&t&&(e.Q6J("formGroup",i.FormIdentification),e.xp6(61),e.Q6J("ngIf",""!=i.Res))},directives:[n._Y,n.JL,n.sg,n.EJ,n.JJ,n.u,n.YN,n.Kr,n.Fj,n.wV,h.O5],styles:[""]}),o})();var p=r(1841),l=r(3342);let s=(()=>{class o{constructor(){}intercept(t,i){return""!=o.jwtToken&&(t=t.clone({setHeaders:{Authorization:`Bearer ${o.jwtToken}`}}),console.log("Bearer renvoy\xe9:"+o.jwtToken)),i.handle(t).pipe((0,l.b)(c=>{if(c instanceof p.Zn){let T,q=c.headers.get("Authorization");null!=q&&(T=q.split(/Bearer\s+(.*)$/i),T.length>1&&(o.jwtToken=T[1],console.log("Bearer renvoy\xe9:"+o.jwtToken)))}}))}}return o.jwtToken="",o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();var u=r(7126),f=r(972);const Z=function(){return["/client/signup"]},d=function(){return["/client/signin"]};function y(o,a){1&o&&(e.TgZ(0,"div"),e.TgZ(1,"p"),e._uU(2,"Vous n'etes pas connect\xe9"),e.qZA(),e.TgZ(3,"a",1),e._uU(4,"Signin"),e.qZA(),e.qZA()),2&o&&(e.xp6(3),e.Q6J("routerLink",e.DdM(1,d)))}function U(o,a){if(1&o&&(e.TgZ(0,"div"),e.TgZ(1,"p"),e.TgZ(2,"span",2),e._uU(3,"Pr\xe9nom:"),e.qZA(),e._uU(4),e.qZA(),e.TgZ(5,"p"),e.TgZ(6,"span",2),e._uU(7,"Nom:"),e.qZA(),e._uU(8),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(4),e.hij(" ",t.client.Nom,""),e.xp6(4),e.hij(" ",t.client.Prenom,"")}}const w=[{path:"signup",component:m},{path:"signin",component:(()=>{class o{constructor(t,i,c,T){this.formBuilder=t,this.httpService=i,this.router=c,this.logServiceService=T,this.FormIdentification=this.formBuilder.group({Login:["",n.kI.required],Password:["",n.kI.required]})}ngOnInit(){}login(){this.httpService.login(this.FormIdentification.value.Login,this.FormIdentification.value.Password).subscribe(t=>{console.log(t),this.logServiceService.setCurrentClient(this.FormIdentification.value.Login,this.FormIdentification.value.Password,t.nom,t.prenom),s.jwtToken=t.jwt})}submit(){console.log(this.FormIdentification.value.Login),console.log(this.FormIdentification.value.Password);var t=!1;this.httpService.getClient().then(i=>{i.map(c=>{c.login==this.FormIdentification.value.Login&&c.mdp==this.FormIdentification.value.Password&&(t=!0,this.logServiceService.setCurrentClient(c.login,c.mdp,c.Nom,c.Prenom),this.router.navigate(["client/compte"]))})}).then(()=>{0==t&&alert("identifiants incorrects")})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(n.qu),e.Y36(u.w),e.Y36(g.F0),e.Y36(f.E))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-signin"]],decls:14,vars:3,consts:[[3,"formGroup","ngSubmit"],[1,"form-group",2,"display","flex"],[1,"col-md-4"],["for","Login"],["type","text","formControlName","Login","id","Login","placeholder","Login",1,"form-control"],["for","psw"],["type","password","formControlName","Password","id","psw","placeholder","Password",1,"form-control"],["type","submit",1,"btn","btn-primary",2,"margin-left","15px"],[1,"nav-item","nav-link",3,"routerLink"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return i.login()}),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"label",3),e._uU(4,"Login"),e.qZA(),e._UZ(5,"input",4),e.qZA(),e.TgZ(6,"div",2),e.TgZ(7,"label",5),e._uU(8,"Password"),e.qZA(),e._UZ(9,"input",6),e.qZA(),e.qZA(),e.TgZ(10,"button",7),e._uU(11,"Submit"),e.qZA(),e.qZA(),e.TgZ(12,"a",8),e._uU(13,"Signup"),e.qZA()),2&t&&(e.Q6J("formGroup",i.FormIdentification),e.xp6(12),e.Q6J("routerLink",e.DdM(2,Z)))},directives:[n._Y,n.JL,n.sg,n.Fj,n.JJ,n.u,g.yS],styles:[""]}),o})()},{path:"compte",component:(()=>{class o{constructor(t){this.logServiceService=t,this.client=this.logServiceService.getCurrentClient()}ngOnInit(){console.log(this.logServiceService.getCurrentClient())}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(f.E))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-compte"]],decls:2,vars:2,consts:[[4,"ngIf"],[3,"routerLink"],[2,"font-weight","bold"]],template:function(t,i){1&t&&(e.YNc(0,y,5,2,"div",0),e.YNc(1,U,9,2,"div",0)),2&t&&(e.Q6J("ngIf",""==i.client.Nom),e.xp6(1),e.Q6J("ngIf",""!=i.client.Nom))},directives:[h.O5,g.yS],styles:[""]}),o})()},{path:"store",loadChildren:()=>r.e(787).then(r.bind(r,787)).then(o=>o.StoreModule)}];let b=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[h.ez,n.u5,p.JF,n.UX,g.Bz.forChild(w)]]}),o})()}}]);